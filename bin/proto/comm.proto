syntax = "proto3";

enum errno {
    SUCCESS = 0;
    FAILURE = 1;
    UNKNOWN = 2;
    SERVICE = 3;
    OVERLOAD = 4;
    CONFLICT = 5;
    PRIVILEGE = 6;
    DATA_ERROR = 7;
	PARAM_ERROR = 8;
	ACTION_ERROR = 9;
    NEED_RETRY = 10;
    NOT_FOUND = 11;

    TEXAS_HAS_SEAT = 101;
    TEXAS_SEAT_USED = 102;
	TEXAS_PLAYER_NUM = 103;
	TEXAS_TURN_ERROR = 104;
	TEXAS_STATUS_ERROR = 105;
}

enum service {
	LUAPP = 0;
	ROUTER = 1;
	DBAGENT = 2;
	LISTSVR = 3;
	ROOMSVR = 4;
	LOBBY = 5;
}

enum game_mode {
	DEFAULT = 0;
	TEXAS = 1;
}

enum room_status {
	INITING = 0;
	WAITING = 1;
	PLAYING = 2;
	CLOSED = 3;
}

enum reason_type {
	NOTHING = 0;
	CREATE_ROOM = 1;
	ENTER_ROOM = 2;
	LEAVE_ROOM = 3;
	DISMISS_ROOM = 4;
	ROOM_TIMEOUT = 5;
	ROLE_OFFLINE = 6;
}

message texas_opt {
	int32 ante = 1;
	int32 small_blind = 2;
	int32 big_blind = 3;
	int32 max_player = 4;
	int32 bring_limit = 5;
	int32 raise_limit = 6;
}

message game_opt {
	oneof oneof_option {
		texas_opt texas = 1;
	}
}

message game_detail {
	oneof oneof_game {
		texas_detail texas = 1;
	}
}

message room_role {
	int64 roleid = 1;
	string openid = 2;
	string name = 3;
	string icon = 4;
	int32 gender = 5;
}

message room_brief {
	int64 roomid = 1;
	int32 roomkey = 2;
	string name = 3;
	room_status status = 4;
	int32 create_time = 5;
	int32 begin_time = 6;
	int32 close_time = 7;
	game_mode mode = 8;
	game_opt option = 9;
}

message room_detail {
	int64 roomid = 1;
	int32 roomkey = 2;
	string name = 3;
	room_status status = 4;
	int32 create_time = 5;
	int32 start_time = 6;
	int32 close_time = 7;
	game_mode mode = 8;
	game_opt option = 9;
	repeated room_role viewers = 15;
	game_detail game = 16;
}

message texas_player {
	int64 roleid = 1;
	string openid = 2;
	string name = 3;
	string icon = 4;
	int32 gender = 5;
	int32 seatid = 6;
	int64 chips = 7;
}

message texas_seat {
	int32 seatid = 1;
	int64 roleid = 2;
	int32 card1 = 3;
	int32 card2 = 4;
	int32 show_flag = 5;
}

enum texas_status {
	INIT = 0;
	PREFLOP = 1;
	FLOP = 2;
	TURN = 3;
	RIVER = 4;
	SETTLING = 5;
	FINISH = 6;
}

enum action_type {
	TIMEOUT = 0;
	ANTE = 1;
	SMALL_BLIND = 2;
	BIG_BLIND = 3;
	BET = 4;
	CALL = 5;
	FOLD = 6;
	CHECK = 7;
	RAISE = 8;
	RE_RAISE = 9;
	ALL_IN = 10;
}

message texas_action {
	int32 seatid = 1;
	int32 game_time = 2;
	action_type act_type = 3;
	int64 act_chips = 4;
}

message texas_round {
	int32 index = 1;
	int32 game_time = 2;
	repeated texas_action actions = 3;
}

message texas_hand {
	int32 index = 1;
	int32 button = 2;
	int32 start_time = 3;
	repeated int32 shared_cards = 4;
	repeated texas_round rounds = 5;
}

message texas_detail {
	repeated texas_player players = 1;
	oneof oneof_hand {
		texas_hand current = 2;	
	}
}

message texas_brief {

}

message texas_record {

}